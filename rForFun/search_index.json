[["sharing-your-book.html", "Chapter 7 Sharing your book 7.1 Rose 7.2 Publishing 7.3 404 pages 7.4 Metadata for sharing", " Chapter 7 Sharing your book 7.1 Rose https://en.wikipedia.org/wiki/Rose_(mathematics) library(sf) ## Linking to GEOS 3.9.1, GDAL 3.4.3, PROJ 7.2.1; sf_use_s2() is TRUE library(tidyverse) ## ── Attaching packages ## ─────────────────────────────────────── ## tidyverse 1.3.2 ── ## ✔ ggplot2 3.3.6 ✔ purrr 0.3.4 ## ✔ tibble 3.1.8 ✔ dplyr 1.0.9 ## ✔ tidyr 1.2.0 ✔ stringr 1.4.0 ## ✔ readr 2.1.2 ✔ forcats 0.5.1 ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ── ## ✖ dplyr::filter() masks stats::filter() ## ✖ dplyr::lag() masks stats::lag() library(gganimate) st_rose = function(p, q, n){ tmp &lt;- tibble(theta = seq(0, n*pi, length.out = 200)) %&gt;% mutate(r = 1 * cos(p/q * theta)) %&gt;% mutate(x = r * cos(theta)) %&gt;% mutate(y = r * sin(theta)) linestring &lt;- tmp %&gt;% select(x, y) %&gt;% #bind_rows(tmp %&gt;% select(x, y) %&gt;% slice(1)) %&gt;% as.matrix() %&gt;% list() %&gt;% st_multilinestring() %&gt;% st_sfc() linestring} p = c(1:3) q = c(1:3) rose &lt;- expand.grid(p = p, q = q) %&gt;% mutate(n = if_else( (p*q) %% 2 == 0, 2*q, 1*q)) %&gt;% mutate(facet = row_number()) %&gt;% mutate(geometry = list(st_point())) %&gt;% st_as_sf(sf_column_name = &quot;geometry&quot;) %&gt;% rowwise() %&gt;% mutate(geometry = st_rose(p, q, n)) anim &lt;- rose %&gt;% ggplot() + geom_sf() + transition_time(facet) + scale_colour_identity() + view_follow() + # geom_sf_text(aes(label = paste(&quot;p:&quot;, p, &quot;q:&quot;, q)), colour = &quot;red&quot;) + theme_void() #+ ggtitle(&quot;r = 1 * cos(p/q * theta)&quot;) animate(anim, renderer = gifski_renderer(&quot;Rose.gif&quot;), fps = 10, duration = 10) #60 7.2 Publishing HTML books can be published online, see: https://bookdown.org/yihui/bookdown/publishing.html library(rsvg) library(grid) library(inkscaper) url &lt;- &#39;Station_Clock_Paths.svg&#39; url %&gt;% rsvg() %&gt;% grid.raster() logo &lt;- inx_extension(input = url, inkscape_extension_name = &quot;dxf12_outlines.py&quot;, ext =&quot;.dxf&quot;) %&gt;% st_read() logo %&gt;% ggplot() + geom_sf() clock_face &lt;- logo %&gt;% slice(1:129) %&gt;% st_union() %&gt;% st_polygonize() %&gt;% first() %&gt;% first() centre &lt;- st_centroid(clock_face) %&gt;% st_coordinates() %&gt;% as.vector() clock_face &lt;- clock_face - centre clock_face %&gt;% ggplot() + geom_sf() clock_scale &lt;- logo %&gt;% slice(130:192) %&gt;% st_union() clock_scale &lt;- clock_scale - centre clock_scale %&gt;% ggplot() + geom_sf() hour_hand &lt;- logo %&gt;% slice(193:197) %&gt;% st_union() %&gt;% st_polygonize() %&gt;% first() %&gt;% first() hour_hand &lt;- hour_hand - centre hour_hand %&gt;% ggplot() + geom_sf() minute_hand &lt;- logo %&gt;% slice(198:202) %&gt;% st_union() %&gt;% st_polygonize() %&gt;% first() %&gt;% first() minute_hand &lt;- minute_hand - centre minute_hand %&gt;% ggplot() + geom_sf() second_hand &lt;- logo %&gt;% slice(203:277) %&gt;% st_union() %&gt;% st_polygonize() %&gt;% first() %&gt;% first() second_hand &lt;- second_hand - centre second_hand %&gt;% ggplot() + geom_sf() rot = function(a) matrix(c(cos(2*pi*a), sin(2*pi*a), -sin(2*pi*a), cos(2*pi*a)), 2, 2) collection = st_sfc() %&gt;% st_sf() for (i in c(1:60)) { second_hand &lt;- second_hand * rot(1/60) tmp &lt;- clock_face %&gt;% st_sfc() %&gt;% st_sf() %&gt;% mutate(colour = &#39;black&#39;) %&gt;% bind_rows(clock_scale %&gt;% st_sfc() %&gt;% st_sf() %&gt;% mutate(colour = &#39;black&#39;)) %&gt;% bind_rows(hour_hand %&gt;% st_sfc() %&gt;% st_sf() %&gt;% mutate(colour = &#39;black&#39;)) %&gt;% bind_rows(minute_hand %&gt;% st_sfc() %&gt;% st_sf() %&gt;% mutate(colour = &#39;black&#39;)) %&gt;% bind_rows(second_hand %&gt;% st_sfc() %&gt;% st_sf() %&gt;% mutate(colour = &#39;black&#39;)) %&gt;% mutate(facet = i) collection &lt;- collection %&gt;% bind_rows(tmp) } library(gganimate) anim &lt;- collection %&gt;% ggplot() + geom_sf() + # aes(fill = colour) + transition_time(facet) + # scale_color_identity() + # scale_fill_identity() + theme_void() #anim animate(anim, renderer = gifski_renderer(&quot;Station_Clock.gif&quot;), fps = 1, duration = 60) 7.3 404 pages By default, users will be directed to a 404 page if they try to access a webpage that cannot be found. If you’d like to customize your 404 page instead of using the default, you may add either a _404.Rmd or _404.md file to your project root and use code and/or Markdown syntax. 7.4 Metadata for sharing Bookdown HTML books will provide HTML metadata for social sharing on platforms like Twitter, Facebook, and LinkedIn, using information you provide in the index.Rmd YAML. To setup, set the url for your book and the path to your cover-image file. Your book’s title and description are also used. This gitbook uses the same social sharing data across all chapters in your book- all links shared will look the same. Specify your book’s source repository on GitHub using the edit key under the configuration options in the _output.yml file, which allows users to suggest an edit by linking to a chapter’s source file. Read more about the features of this output format here: https://pkgs.rstudio.com/bookdown/reference/gitbook.html Or use: ?bookdown::gitbook "]]
